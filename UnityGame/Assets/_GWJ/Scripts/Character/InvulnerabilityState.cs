using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class InvulnerabilityState : MonoBehaviour
{
    [SerializeField] bool invulnerability = false;

    Character Character;
    Color OriginalColor;
    private void Awake()
    {
        Character = GetComponent<Character>();
        OriginalColor = Character.Renderer.color;
    }

    public bool Invulnerability
    {
        get { return invulnerability; }
        set
        {
            invulnerability = value;
            if (value)
                timer = 0;
        }
    }

    [SerializeField] float InvulnerabilityTime;
    float timer = 0;

    private void Update()
    {
        if (invulnerability)
        {
            timer += Time.deltaTime;
            var color = Character.Renderer.color;
            color.g = Mathf.Sin(Mathf.PI * timer * 5);
            color.b = Mathf.Sin(Mathf.PI * timer * 5);
            Character.Renderer.color = color;

            if (timer > InvulnerabilityTime)
            {
                invulnerability = false;

                Character.Renderer.color = OriginalColor;
            }
        }
    }

}
